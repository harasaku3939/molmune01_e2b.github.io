<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ ¸åˆ†è£‚ç”Ÿæˆç‰©ã‚¬ãƒãƒ£ - Fission Gacha</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Kosugi+Maru&family=M+PLUS+Rounded+1c:wght@700&family=Shippori+Mincho+B1:wght@700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-pink: #ff99bb;
            --soft-blue: #b3e5fc;
            --soft-yellow: #fff9c4;
            --gold: #ffd700;
        }

        body {
            /* æ°´ç‰ã¨ã‚¹ãƒˆãƒ©ã‚¤ãƒ—ã‚’çµ„ã¿åˆã‚ã›ãŸè³‘ã‚„ã‹ãªèƒŒæ™¯ */
            background-color: #fff5f7;
            background-image: 
                radial-gradient(#ffcad4 15%, transparent 16%),
                radial-gradient(#ffcad4 15%, transparent 16%),
                linear-gradient(45deg, rgba(255,255,255,0.2) 25%, transparent 25%, transparent 50%, rgba(255,255,255,0.2) 50%, rgba(255,255,255,0.2) 75%, transparent 75%, transparent);
            background-size: 40px 40px, 40px 40px, 100px 100px;
            background-position: 0 0, 20px 20px, 0 0;
            font-family: 'Kosugi Maru', sans-serif;
            overflow-x: hidden;
            touch-action: manipulation;
        }

        /* ç”»é¢ç«¯ã®ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ */
        .deco-cloud {
            position: fixed;
            z-index: -1;
            opacity: 0.6;
            filter: drop-shadow(0 0 10px white);
        }

        .kawaii-font {
            font-family: 'M PLUS Rounded 1c', sans-serif;
        }

        .divine-font {
            font-family: 'Shippori Mincho B1', serif;
            text-shadow: 0 0 15px rgba(255, 215, 0, 0.9), 0 0 30px rgba(255, 255, 255, 1);
        }

        /* ã‚¬ãƒãƒ£æœ¬ä½“ */
        .gacha-machine {
            position: relative;
            width: 300px;
            height: 420px;
            background: var(--primary-pink);
            border-radius: 150px 150px 60px 60px;
            border: 10px solid #ff6699;
            box-shadow: 0 15px 0 #e65585, 0 30px 40px rgba(0,0,0,0.1);
            margin: 0 auto;
        }

        .gacha-dome {
            width: 240px;
            height: 200px;
            background: rgba(255, 255, 255, 0.6);
            border-radius: 120px 120px 20px 20px;
            margin: 20px auto;
            border: 5px solid rgba(255, 255, 255, 0.9);
            position: relative;
            overflow: hidden;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-content: center;
            padding: 15px;
        }

        .capsule-mini {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            margin: 3px;
            box-shadow: inset -3px -3px 0 rgba(0,0,0,0.1);
            animation: bounce 2.5s infinite ease-in-out;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0) rotate(0); }
            50% { transform: translateY(-10px) rotate(10deg); }
        }

        .crank-base {
            width: 100px;
            height: 100px;
            background: #fff;
            border: 8px solid #ff6699;
            border-radius: 50%;
            margin: 25px auto 0;
            position: relative;
            cursor: pointer;
            box-shadow: 0 5px 0 #ccc;
        }

        .crank-handle {
            position: absolute;
            top: 50%;
            left: 5%;
            width: 90%;
            height: 15px;
            background: #ff6699;
            border-radius: 10px;
            transform: translateY(-50%);
        }

        .rotating .crank-handle {
            animation: rotate 0.6s linear infinite;
        }

        @keyframes rotate {
            from { transform: translateY(-50%) rotate(0deg); }
            to { transform: translateY(-50%) rotate(360deg); }
        }

        /* æ¼”å‡ºç”¨ */
        .overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle, rgba(255,255,255,0.9) 0%, rgba(255,240,245,1) 100%);
            z-index: 100;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }

        .fission-event {
            position: relative;
            width: 300px;
            height: 300px;
        }

        .u235 {
            width: 90px;
            height: 90px;
            background: #b2f2bb; /* ãƒ‘ã‚¹ãƒ†ãƒ«ã‚°ãƒªãƒ¼ãƒ³ */
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 14px;
            font-weight: bold;
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            border: 5px solid #fff;
            box-shadow: 0 0 20px rgba(178, 242, 187, 0.8);
            z-index: 10;
        }

        .neutron {
            width: 35px;
            height: 35px;
            background: #ffc9c9; /* ãƒ‘ã‚¹ãƒ†ãƒ«ãƒ¬ãƒƒãƒ‰ */
            border-radius: 50%;
            position: absolute;
            left: -120px;
            top: 50%;
            transform: translateY(-50%);
            border: 4px solid #fff;
            z-index: 11;
        }

        .flash {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: radial-gradient(circle, #fff 10%, #fffde7 40%, #fff176 70%, transparent 100%);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            opacity: 0;
            z-index: 20;
        }

        .result-card {
            background: white;
            padding: 2.5rem;
            border-radius: 3rem;
            text-align: center;
            box-shadow: 0 30px 60px rgba(0,0,0,0.15);
            max-width: 350px;
            width: 90%;
            display: none;
            border: 8px solid var(--primary-pink);
            position: relative;
        }

        .rarity-tag {
            display: inline-block;
            padding: 6px 20px;
            border-radius: 25px;
            color: white;
            font-weight: bold;
            margin-bottom: 1.5rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            box-shadow: 0 4px 0 rgba(0,0,0,0.1);
        }

        .ribbon {
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            background: #ff6699;
            color: white;
            padding: 5px 20px;
            border-radius: 5px;
            font-weight: bold;
            box-shadow: 0 4px 0 #e65585;
        }

        /* ã‚­ãƒ©ã‚­ãƒ©ç²’å­ */
        .sparkle {
            position: absolute;
            background: white;
            border-radius: 50%;
            pointer-events: none;
            animation: sparkle-anim 1s linear forwards;
        }

        @keyframes sparkle-anim {
            0% { transform: scale(0); opacity: 1; }
            100% { transform: scale(1.5); opacity: 0; }
        }
    </style>
</head>
<body class="flex flex-col items-center justify-center min-h-screen p-4">

    <!-- èƒŒæ™¯ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ -->
    <div class="deco-cloud top-10 left-10 text-6xl">â˜ï¸</div>
    <div class="deco-cloud bottom-20 right-10 text-6xl">â˜ï¸</div>
    <div class="deco-cloud top-40 right-20 text-4xl">â­</div>
    <div class="deco-cloud bottom-40 left-20 text-4xl">ğŸ­</div>

    <!-- ãƒ¡ã‚¤ãƒ³ç”»é¢ -->
    <div id="game-screen" class="text-center w-full max-w-md relative">
        <div class="mb-6">
            <h1 class="kawaii-font text-4xl text-pink-500 font-bold tracking-wider" style="text-shadow: 2px 2px 0 white, -2px -2px 0 white;">
                æ ¸åˆ†è£‚ç”Ÿæˆç‰©ã‚¬ãƒãƒ£
            </h1>
            <div class="text-pink-400 font-bold mt-1">Fission Product Collection</div>
        </div>

        <div class="gacha-machine">
            <!-- ãƒã‚§ãƒƒã‚¯æŸ„ã®ãƒ™ãƒ«ãƒˆè£…é£¾ -->
            <div class="w-full h-8 bg-white opacity-40 my-2 flex items-center justify-around overflow-hidden">
                <div class="w-4 h-4 rounded-full bg-pink-300"></div>
                <div class="w-4 h-4 rounded-full bg-pink-300"></div>
                <div class="w-4 h-4 rounded-full bg-pink-300"></div>
                <div class="w-4 h-4 rounded-full bg-pink-300"></div>
                <div class="w-4 h-4 rounded-full bg-pink-300"></div>
            </div>

            <div id="dome-items" class="gacha-dome">
                <!-- JSã§ãƒ‰ãƒ¼ãƒ å†…ã®ç²’ã‚’è¡¨ç¤º -->
            </div>
            
            <div class="mt-2 text-white font-bold text-xl kawaii-font flex justify-center items-center gap-2">
                <span>ğŸ€</span> <span>1 Fission / Free</span> <span>ğŸ€</span>
            </div>

            <div id="main-crank" class="crank-base">
                <div class="crank-handle"></div>
            </div>

            <div class="mt-6 text-pink-700 font-bold animate-bounce flex items-center justify-center gap-1">
                <span class="text-2xl">âœ¨</span> ã¾ã‚ã—ã¦ã­ï¼ <span class="text-2xl">âœ¨</span>
            </div>
        </div>

        <div class="mt-10 p-4 bg-white bg-opacity-60 rounded-2xl border-2 border-pink-200 text-xs text-pink-500 kawaii-font">
            JAERI-M-7873ã®235Uç†±ä¸­æ€§å­æ ¸åˆ†è£‚åç‡ãƒ‡ãƒ¼ã‚¿ã«åŸºã¥ã„ãŸã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™
        </div>
    </div>

    <!-- æ¼”å‡ºç”¨ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ -->
    <div id="fission-overlay" class="overlay">
        <div id="fission-stage" class="fission-event">
            <div id="target-nucleus" class="u235">235U</div>
            <div id="incoming-neutron" class="neutron">n</div>
            <div id="fission-flash" class="flash"></div>
        </div>

        <div id="result-container" class="result-card">
            <div class="ribbon kawaii-font">NEW GENERATION!</div>
            <div id="rarity-badge" class="rarity-tag mt-4">COMMON</div>
            <div id="product-symbol" class="divine-font text-7xl mb-2 text-yellow-600">Sr</div>
            <div id="product-name" class="kawaii-font text-2xl font-bold mb-4">ã‚¹ãƒˆãƒ­ãƒ³ãƒã‚¦ãƒ -90</div>
            <div id="product-mass" class="text-gray-400 mb-6 italic text-sm">Mass Number: 90</div>
            <p id="product-desc" class="text-sm text-gray-600 mb-8 leading-relaxed kawaii-font"></p>
            
            <button onclick="resetGacha()" class="bg-pink-400 hover:bg-pink-500 text-white font-bold py-4 px-10 rounded-full shadow-lg transition duration-300 transform hover:scale-105 active:scale-95 kawaii-font">
                ã‚‚ã†ã„ã¡ã©ï¼ â†º
            </button>
        </div>
    </div>

    <script>
        // æ ¸åˆ†è£‚ç”Ÿæˆç‰©ãƒ‡ãƒ¼ã‚¿
        const products = [
            { symbol: 'Zr', name: 'ã‚¸ãƒ«ã‚³ãƒ‹ã‚¦ãƒ -95', mass: 95, yield: 6.5, rarity: 'Common', desc: 'è»½æ ¸å´ã®ãƒ”ãƒ¼ã‚¯ä»˜è¿‘ï¼å…ƒæ°—ã„ã£ã±ã„ã®æ ¸ç¨®ã ã‚ˆã€‚' },
            { symbol: 'Mo', name: 'ãƒ¢ãƒªãƒ–ãƒ‡ãƒ³-99', mass: 99, yield: 6.1, rarity: 'Common', desc: 'åŒ»ç™‚ã®ä¸–ç•Œã§ã‚‚å¤§äººæ°—ï¼ã¿ã‚“ãªã‚’åŠ©ã‘ã‚‹ãƒ’ãƒ¼ãƒ­ãƒ¼ã€‚' },
            { symbol: 'Cs', name: 'ã‚»ã‚·ã‚¦ãƒ -137', mass: 137, yield: 6.2, rarity: 'Common', desc: 'é‡æ ¸å´ã®ã‚¨ãƒ¼ã‚¹ï¼ã¨ã£ã¦ã‚‚å­˜åœ¨æ„ŸãŒã‚ã‚‹ã­ã€‚' },
            { symbol: 'Ba', name: 'ãƒãƒªã‚¦ãƒ -140', mass: 140, yield: 6.3, rarity: 'Common', desc: 'ã©ã£ã—ã‚Šæ§‹ãˆãŸé‡æ ¸å´ã®å®šç•ªã•ã‚“ã€‚' },
            { symbol: 'I', name: 'ãƒ¨ã‚¦ç´ -131', mass: 131, yield: 2.9, rarity: 'Rare', desc: 'æ˜‡è¯ã—ã¡ã‚ƒã†ï¼ï¼Ÿã¡ã‚‡ã£ã¨æ°—ã¾ãã‚Œãªæ€§æ ¼ã€‚' },
            { symbol: 'Sr', name: 'ã‚¹ãƒˆãƒ­ãƒ³ãƒã‚¦ãƒ -90', mass: 90, yield: 5.8, rarity: 'Common', desc: 'éª¨ã¨ä»²è‰¯ã—ï¼ã‚«ãƒ«ã‚·ã‚¦ãƒ ã®è¦ªæˆšã¿ãŸã„ãªå­ã€‚' },
            { symbol: 'Ru', name: 'ãƒ«ãƒ†ãƒ‹ã‚¦ãƒ -106', mass: 106, yield: 0.4, rarity: 'Super Rare', desc: 'è°·é–“ã®å…¥ã‚Šå£ã«ä½ã‚“ã§ã„ã‚‹ã€æ¥ãšã‹ã—ãŒã‚Šå±‹ã€‚' },
            { symbol: 'Ag', name: 'éŠ€-111', mass: 111, yield: 0.015, rarity: 'Ultra Rare', desc: 'å¯¾ç§°æ ¸åˆ†è£‚ã®å¥‡è·¡ï¼ã¾ã°ã‚†ã„éŠ€è‰²ã®è¼ãã€‚' },
            { symbol: 'Sn', name: 'ã‚¹ã‚º-125', mass: 125, yield: 0.03, rarity: 'Ultra Rare', desc: 'ã‚«ãƒ¢ãƒ¡ã®ç¿¼ã®ã©çœŸã‚“ä¸­ï¼å‡ºä¼šãˆãŸã‚‰è¶…ãƒ©ãƒƒã‚­ãƒ¼ï¼' },
            { symbol: 'Kr', name: 'ã‚¯ãƒªãƒ—ãƒˆãƒ³-85', mass: 85, yield: 0.3, rarity: 'Super Rare', desc: 'ãµã‚ãµã‚ç©ºã‚’é£›ã¶å¸Œã‚¬ã‚¹ã®å¦–ç²¾ã€‚' },
            { symbol: 'Pm', name: 'ãƒ—ãƒ­ãƒ¡ãƒã‚¦ãƒ -147', mass: 147, yield: 2.2, rarity: 'Rare', desc: 'é‡æ ¸ã®ã™ãé‡ã«å’²ãã€ãƒ¬ã‚¢ãªè¼ãã€‚' }
        ];

        const crank = document.getElementById('main-crank');
        const overlay = document.getElementById('fission-overlay');
        const neutron = document.getElementById('incoming-neutron');
        const flash = document.getElementById('fission-flash');
        const resultCard = document.getElementById('result-container');
        const fissionStage = document.getElementById('fission-stage');
        const dome = document.getElementById('dome-items');

        function initDome() {
            dome.innerHTML = '';
            const colors = ['#ffaaa5', '#a8e6cf', '#ffdec1', '#dcedc1', '#b3e5fc'];
            for (let i = 0; i < 35; i++) {
                const dot = document.createElement('div');
                dot.className = 'capsule-mini';
                dot.style.background = colors[i % colors.length];
                dot.style.animationDelay = `${Math.random() * 2}s`;
                dome.appendChild(dot);
            }
        }

        initDome();

        crank.addEventListener('click', () => {
            if (crank.classList.contains('rotating')) return;
            crank.classList.add('rotating');
            setTimeout(startFissionSequence, 800);
        });

        function startFissionSequence() {
            overlay.style.display = 'flex';
            fissionStage.style.display = 'block';
            resultCard.style.display = 'none';
            
            neutron.animate([
                { left: '-150px', opacity: 1 },
                { left: '45%', opacity: 1, offset: 0.9 },
                { left: '50%', opacity: 0 }
            ], {
                duration: 1200,
                easing: 'ease-in',
                fill: 'forwards'
            }).onfinish = triggerExplosion;
        }

        function triggerExplosion() {
            flash.animate([
                { width: '0', height: '0', opacity: 0 },
                { width: '1000px', height: '1000px', opacity: 1, offset: 0.5 },
                { width: '1200px', height: '1200px', opacity: 0 }
            ], {
                duration: 1000,
                easing: 'ease-out'
            }).onfinish = showResult;
            
            // çˆ†ç™ºã«åˆã‚ã›ã¦ç”»é¢ã‚’æºã‚‰ã™
            overlay.animate([
                { transform: 'translate(1px, 1px) rotate(0deg)' },
                { transform: 'translate(-1px, -2px) rotate(-1deg)' },
                { transform: 'translate(-3px, 0px) rotate(1deg)' },
                { transform: 'translate(0px, 0px) rotate(0deg)' }
            ], { duration: 500 });
        }

        function showResult() {
            fissionStage.style.display = 'none';
            resultCard.style.display = 'block';
            
            const totalYield = products.reduce((acc, p) => acc + p.yield, 0);
            let random = Math.random() * totalYield;
            let selected = products[0];

            for (const p of products) {
                if (random < p.yield) {
                    selected = p;
                    break;
                }
                random -= p.yield;
            }

            document.getElementById('product-symbol').innerText = selected.symbol;
            document.getElementById('product-name').innerText = selected.name;
            document.getElementById('product-mass').innerText = `Mass Number: ${selected.mass}`;
            document.getElementById('product-desc').innerText = selected.desc;
            
            const badge = document.getElementById('rarity-badge');
            const symbol = document.getElementById('product-symbol');
            badge.innerText = selected.rarity.toUpperCase();
            
            if (selected.rarity.includes('Ultra')) {
                resultCard.style.borderColor = '#ffd700';
                badge.style.background = 'linear-gradient(45deg, #f093fb 0%, #f5576c 100%)';
                symbol.className = 'divine-font text-8xl mb-2 text-yellow-500 animate-pulse';
                createSparkles();
            } else if (selected.rarity.includes('Super')) {
                resultCard.style.borderColor = '#96fbc4';
                badge.style.background = 'linear-gradient(to top, #48c6ef 0%, #6f86d6 100%)';
                symbol.className = 'divine-font text-7xl mb-2 text-indigo-500';
            } else if (selected.rarity === 'Rare') {
                resultCard.style.borderColor = '#ffecd2';
                badge.style.background = '#ff9a9e';
                symbol.className = 'divine-font text-6xl mb-2 text-pink-600';
            } else {
                resultCard.style.borderColor = '#ff99bb';
                badge.style.background = '#ff99bb';
                symbol.className = 'divine-font text-6xl mb-2 text-pink-400';
            }
        }

        function createSparkles() {
            for (let i = 0; i < 50; i++) {
                const s = document.createElement('div');
                s.className = 'sparkle';
                s.innerText = i % 2 === 0 ? 'âœ¨' : 'ğŸ’–';
                s.style.left = Math.random() * 100 + '%';
                s.style.top = Math.random() * 100 + '%';
                s.style.fontSize = (Math.random() * 20 + 10) + 'px';
                s.style.animationDelay = (Math.random() * 2) + 's';
                overlay.appendChild(s);
                setTimeout(() => s.remove(), 4000);
            }
        }

        function resetGacha() {
            overlay.style.display = 'none';
            crank.classList.remove('rotating');
            neutron.style.left = '-150px';
            neutron.style.opacity = '1';
        }
    </script>
</body>
</html>

